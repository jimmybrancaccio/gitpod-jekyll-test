tasks:
  - name: Update ~/.bashrc
    before: |
      echo '# Install Ruby Gems to /workspace/gems' >> ~/.bashrc
      echo 'export GEM_HOME="/workspace/gems"' >> ~/.bashrc
      echo 'export PATH="/workspace/gems/bin:$PATH"' >> ~/.bashrc
  - name: Install Bundler
    init: >
      gem install bundler &&
      gp sync-done bundle
  - name: Run bundle install
    init: gp sync-await bundle
    command: |
      bundle install &&
      gp sync-done bundle-install
  - name: Start Jekyll
    init: gp sync-await bundle-install
    command: bundle exec jekyll serve --livereload

ports:
  - port: 4000
    onOpen: open-browser
